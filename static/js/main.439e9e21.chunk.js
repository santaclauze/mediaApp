(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(7),r=n.n(o),c=n(38),s=n.n(c),l=(n(86),n(87),n(19)),u=n(31),d=n(12),p=n(13),h=n(15),m=n(14),v=n(16),f=n(4),b=n(23),g=n(17),O=n.n(g),j=n(8),y=n(1),E=n(9);function k(){var e=Object(j.a)(["\n    ","\n"]);return k=function(){return e},e}var w=y.default.div(k(),function(e){return"\n        margin-right: auto;\n        margin-left: auto;\n        padding-left: 10px;\n        padding-right: 10px;\n        ".concat(Object(E.mediaBreakpointUp)("sm",e.theme["$grid-breakpoints"],"\n            width: 540px;\n        "),"\n        ").concat(Object(E.mediaBreakpointUp)("md",e.theme["$grid-breakpoints"],"\n            width: 760px;\n        "),"\n        ").concat(Object(E.mediaBreakpointUp)("lg",e.theme["$grid-breakpoints"],"\n            width: 960px;\n        "),"\n        ").concat(Object(E.mediaBreakpointUp)("xl",e.theme["$grid-breakpoints"],"\n            width: 1150px;\n        "),"\n    ")}),x=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={isOpen:!1},n.handleClick=function(){n.props.onRefreshClick()},n.handleToggle=function(){n.setState({isOpen:!n.state.isOpen})},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.state.isOpen,t=this.props.isLoading;return i.a.createElement(f.h,null,i.a.createElement(w,{className:"d-flex flex-row justify-content-between"},i.a.createElement(f.d,null,"Home"),i.a.createElement(f.b,{color:"success",onClick:this.handleClick,id:"tooltip-button",disabled:t},i.a.createElement(b.a,{icon:"redo",className:O()(t&&"fa-spin")})),i.a.createElement(f.k,{placement:"left",isOpen:e,target:"tooltip-button",toggle:this.handleToggle},"Refresh movie list.")))}}]),t}(i.a.Component),W=n(41),S=n.n(W),M=n(42);function I(){var e=Object(j.a)(["\n  position: absolute;\n  top: 15px;\n  right: 25px;\n  z-index: 9999;\n"]);return I=function(){return e},e}function L(){var e=Object(j.a)(["\n  margin: auto;\n  position: relative;\n"]);return L=function(){return e},e}function C(){var e=Object(j.a)(["\n  position: absolute;\n  top: 0;\n  width: 100%;\n  height: 100vh;\n  background-color:rgba(0,0,0,0.6);\n  display: flex;\n  overflow: hidden;\n  z-index: 9999;\n"]);return C=function(){return e},e}var N=y.default.div(C()),P=y.default.div(L()),$=Object(y.default)(f.c)(I()),B=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.close,a=e.movieContent;return i.a.createElement(M.FadeIn,{duration:t.motion["$motion-duration"].xs,timingFunction:t.motion["$motion-timing-function"].easeIn},i.a.createElement(N,null,i.a.createElement(P,null,i.a.createElement($,{onDismiss:n}),i.a.createElement("video",{controls:!0,autoPlay:!0,height:"500",width:"900",onEnded:n},i.a.createElement("source",{src:a.url,type:"video/".concat(a.format)})))))}}]),t}(i.a.Component),T=Object(y.withTheme)(B);function R(){var e=Object(j.a)(["\n  ","\n"]);return R=function(){return e},e}function U(){var e=Object(j.a)(["\n  min-height: 250px;\n"]);return U=function(){return e},e}function D(){var e=Object(j.a)(["\n  width: 215px;\n  height: 315px;\n"]);return D=function(){return e},e}var F=y.default.div(D()),A=Object(y.default)(f.g)(U()),H=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={movieOpen:!1,movieBase64:null,movieHover:!1},n.handleCloseVideo=function(){var e=n.props,t=e.updatePreviouslyWatchedList,a=e.data;n.setState({movieOpen:!1}),t&&t(a)},n.handleOpenVideo=function(){n.setState({movieOpen:!0})},n.handleOnMouseOver=function(){n.setState({movieHover:!0})},n.handleOnMouseLeave=function(){n.setState({movieHover:!1})},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e,t=this;console.log(this.props),null===localStorage.getItem(this.props.data.id)?fetch("https://cors-anywhere.herokuapp.com/".concat(this.props.data.images[0].url)).then(function(e){return e.blob()}).then(function(e){return new Promise(function(t,n){var a=new FileReader;a.onload=function(e){return t(e.target.result)},a.onerror=n,a.readAsDataURL(e)})}).then(function(n){e=n.replace("data:text/html","data:image/jpeg"),t.setState({movieBase64:e}),localStorage.setItem(t.props.data.id,e)}):this.setState({movieBase64:localStorage.getItem(this.props.data.id)})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,o=this.state,c=o.movieBase64,s=o.movieHover;return i.a.createElement(a.Fragment,null,i.a.createElement(F,{className:O()(n,"movie-wrapper cursor-pointer"),onClick:this.handleOpenVideo,onMouseLeave:this.handleOnMouseLeave,onMouseOver:this.handleOnMouseOver},i.a.createElement(A,{src:c,alt:t.id,className:"cursor-pointer movie-image"}),s&&i.a.createElement("div",{className:"movie-description text-white"},i.a.createElement(f.i,null,t.title),i.a.createElement(f.j,null,t.description),i.a.createElement(f.f,null),i.a.createElement(f.j,null,"Rating: ",t.parentalRatings[0].rating),i.a.createElement(f.f,null),t.categories.map(function(e,t){return i.a.createElement(f.a,{className:"ml-1",key:t},e.title)})),i.a.createElement(f.i,{className:"text-white"},t.title)),this.state.movieOpen?r.a.createPortal(i.a.createElement(T,{close:this.handleCloseVideo,movieContent:t.contents[0]}),document.body):null)}}]),t}(i.a.Component),z=Object(y.default)(H)(R(),function(e){return"\n    &.movie-wrapper {\n      position: relative;\n  \n      .movie-description {\n        position: absolute;\n        top: 0;\n        left: 0;\n      }\n    }\n    ".concat(Object(E.mediaBreakpointDown)("sm",e.theme["$grid-breakpoints"],"\n      &.movie-wrapper, .movie-image, .movie-description {\n        max-width: 175px;\n      }\n    "),"\n  ")});function V(){var e=Object(j.a)(["\n  .slick-arrow {\n    z-index: 9998\n    &.slick-prev {\n      top: 40%;\n    }\n    &.slick-next {\n      top: 40%;\n    }\n  }\n"]);return V=function(){return e},e}var J=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.movies,a=t.theme,o={infinite:!1,dots:!0,speed:500,draggable:!1,slidesToShow:4,slidesToScroll:4,responsive:[{breakpoint:parseInt(a["$grid-breakpoints"].lg,10),settings:{slidesToShow:3,slidesToScroll:3}}]};return i.a.createElement(S.a,Object.assign({},o,{className:this.props.className}),n&&n.map(function(t,n){return i.a.createElement(z,{updatePreviouslyWatchedList:e.props.updatePreviouslyWatchedList,data:t,key:n})}))}}]),t}(i.a.Component),G=Object(y.default)(J)(V()),q=Object(y.withTheme)(G);function K(){var e=Object(j.a)(["\n  color: #08080A;\n"]);return K=function(){return e},e}var Q=Object(y.default)(b.a)(K()),X=function(){return i.a.createElement(Q,{icon:"spinner",className:"fa-pulse text-white fa-3x"})},Y=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(i)))).state={data:null,previouslyWatchedMovieIds:[],isLoading:!1},n.handleRefreshClick=function(){n.fetchData()},n.fetchData=function(){n.setState({isLoading:!0}),fetch("https://demo2697834.mockable.io/movies").then(function(e){return e.json()}).then(function(e){return n.saveData(e)}).catch(function(e){return console.error(e)})},n.saveData=function(e){n.setState({data:e,isLoading:!1})},n.updateFromLocalStorage=function(){var e=localStorage.getItem("previouslyWatched");null!==e&&e.split(",").length>0&&(console.log(e.split(",")),n.setState({previouslyWatchedMovieIds:e.split(",")}))},n.getPreviouslyWatchedMovies=function(e){var t=n.state.previouslyWatchedMovieIds,a=[];return t.map(function(t){return e.map(function(e){t===e.id&&a.push(e)})}),a},n.handleUpdatePreviouslyWatched=function(e){var t=n.state.previouslyWatchedMovieIds;switch(t.length){case 0:t.push(e.id),n.setState({previouslyWatchedMovieIds:t}),localStorage.setItem("previouslyWatched",t);break;case 1:e.id!==t[0]&&(t.unshift(e.id),n.setState({previouslyWatchedMovieIds:t}),localStorage.setItem("previouslyWatched",t));break;default:void 0===t.find(function(t){return e.id===t})?(t.unshift(e.id),n.setState({previouslyWatchedMovieIds:t}),localStorage.setItem("previouslyWatched",t)):t.map(function(a,i){e.id===a&&(t.splice(i,i+1),t.unshift(e.id),n.setState({previouslyWatchedMovieIds:t}),localStorage.setItem("previouslyWatched",t))})}},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.fetchData(),this.updateFromLocalStorage()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.isLoading;return i.a.createElement("div",{className:"App"},i.a.createElement(x,{onRefreshClick:this.handleRefreshClick,isLoading:a}),a?i.a.createElement("div",{className:"d-flex align-items-center justify-content-around"},i.a.createElement(X,null)):i.a.createElement(w,null,i.a.createElement("div",{className:"d-none d-sm-block"},i.a.createElement(f.e,null,"Featured Movies"),i.a.createElement(q,{movies:n&&n.entries,updatePreviouslyWatchedList:this.handleUpdatePreviouslyWatched}),i.a.createElement(f.f,{className:"my-5"}),i.a.createElement(f.e,null,"Previously Watched Movies"),i.a.createElement(q,{movies:this.getPreviouslyWatchedMovies(n&&n.entries),updatePreviouslyWatchedList:this.handleUpdatePreviouslyWatched})),i.a.createElement("div",{className:"d-sm-none"},i.a.createElement(f.e,null,"Featured Movies"),i.a.createElement("div",{className:"d-flex flex-wrap justify-content-around"},n.entries.map(function(t){return i.a.createElement(z,{data:t,updatePreviouslyWatchedList:e.handleUpdatePreviouslyWatched})})))))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=n(22),_=n(27),ee=n.n(_),te=n(20),ne=n.n(te),ae=Object(Z.makeTheme)({"$body-bg":"#1E2129","$navbar-padding-x":"2rem","$navbar-padding-y":"2rem","$headings-color":"white","$font-size-h2":"20px"}),ie=ne()([Object(te.toMakeTheme)(ae),Object(te.toMakeTheme)(ee.a)])();l.b.add(u.a),l.b.add(u.b),r.a.render(i.a.createElement(s.a,{injectGlobal:!0,reset:!0,theme:ie},i.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},44:function(e,t,n){e.exports=n(210)}},[[44,1,2]]]);
//# sourceMappingURL=main.439e9e21.chunk.js.map